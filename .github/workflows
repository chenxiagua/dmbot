name: CI

on:

  push:

    branches:

      - master

jobs:

  build:

    runs-on: ubuntu-latest

    steps:

      - uses: actions/checkout@v2

      - name: Build and push image

        run: |

          docker build -t my-image .

          echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USERNAME" --password-stdin

          docker tag my-image "$DOCKERHUB_USERNAME/my-image:latest"

          docker push "$DOCKERHUB_USERNAME/my-image:latest"
